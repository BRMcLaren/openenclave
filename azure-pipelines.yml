# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

pool:
  vmImage: 'ubuntu-latest'

steps:
- script: echo Hello, world!
  displayName: 'Run a one-line script'

- task: Bash@3
  inputs:
    targetType: 'inline'
    script: |
      cd openenclave
      echo "cd openenclave"
            
      echo "sudo scripts/ansible/install-ansible.sh"
      sudo scripts/ansible/install-ansible.sh
            
      echo "sudo ansible-playbook scripts/ansible/oe-contributors-setup.yml"
      sudo ansible-playbook scripts/ansible/oe-contributors-setup.yml
            
      echo "mkdir build"
      mkdir build
            
      echo "cd build"
      cd build
            
      echo "cmake -G"
      cmake -G "Ninja" ..
            
      echo "ninja"
      ninja
